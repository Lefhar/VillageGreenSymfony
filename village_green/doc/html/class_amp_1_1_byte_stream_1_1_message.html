<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>village green: Message Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">village green
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Amp</b></li><li class="navelem"><b>ByteStream</b></li><li class="navelem"><a class="el" href="class_amp_1_1_byte_stream_1_1_message.html">Message</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">Message Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for Message:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_amp_1_1_byte_stream_1_1_message.png" usemap="#Message_map" alt=""/>
  <map id="Message_map" name="Message_map">
<area href="interface_amp_1_1_byte_stream_1_1_input_stream.html" alt="InputStream" shape="rect" coords="0,0,78,24"/>
<area href="interface_amp_1_1_promise.html" alt="Promise" shape="rect" coords="88,0,166,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0c106514293f57eceeedafe9aef6d6ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_amp_1_1_byte_stream_1_1_message.html#a0c106514293f57eceeedafe9aef6d6ad">__construct</a> (<a class="el" href="interface_amp_1_1_byte_stream_1_1_input_stream.html">InputStream</a> $source)</td></tr>
<tr class="separator:a0c106514293f57eceeedafe9aef6d6ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64571309bfb3238c65fd3c2898f92440"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_amp_1_1_byte_stream_1_1_message.html#a64571309bfb3238c65fd3c2898f92440">read</a> ()</td></tr>
<tr class="separator:a64571309bfb3238c65fd3c2898f92440"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40dffd1b8c8d65b3c86af44f4d1f228d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_amp_1_1_byte_stream_1_1_message.html#a40dffd1b8c8d65b3c86af44f4d1f228d">onResolve</a> (callable $onResolved)</td></tr>
<tr class="separator:a40dffd1b8c8d65b3c86af44f4d1f228d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a900071ae2a2d77ac76212b3e784b9148"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_amp_1_1_byte_stream_1_1_message.html#a900071ae2a2d77ac76212b3e784b9148">getInputStream</a> ()</td></tr>
<tr class="separator:a900071ae2a2d77ac76212b3e784b9148"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Creates a buffered message from an <a class="el" href="interface_amp_1_1_byte_stream_1_1_input_stream.html">InputStream</a>. The message can be consumed in chunks using the <a class="el" href="class_amp_1_1_byte_stream_1_1_message.html#a64571309bfb3238c65fd3c2898f92440">read()</a> API or it may be buffered and accessed in its entirety by waiting for the promise to resolve.</p>
<p >Other implementations may extend this class to add custom properties such as a <code>isBinary()</code> flag for WebSocket messages.</p>
<p >Buffering Example:</p>
<p >$stream = new <a class="el" href="class_amp_1_1_byte_stream_1_1_message.html">Message</a>($inputStream); $content = yield $stream;</p>
<p >Streaming Example:</p>
<p >$stream = new <a class="el" href="class_amp_1_1_byte_stream_1_1_message.html">Message</a>($inputStream);</p>
<p >while (($chunk = yield $stream-&gt;<a class="el" href="class_amp_1_1_byte_stream_1_1_message.html#a64571309bfb3238c65fd3c2898f92440">read()</a>) !== null) { // Immediately use $chunk, reducing memory consumption since the entire message is never buffered. }</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000019">Deprecated:</a></b></dt><dd>Use Amp\ByteStream\Payload instead. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0c106514293f57eceeedafe9aef6d6ad" name="a0c106514293f57eceeedafe9aef6d6ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c106514293f57eceeedafe9aef6d6ad">&#9670;&nbsp;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_amp_1_1_byte_stream_1_1_input_stream.html">InputStream</a>&#160;</td>
          <td class="paramname"><em>$source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="interface_amp_1_1_byte_stream_1_1_input_stream.html">InputStream</a></td><td class="paramname">$source</td><td>An iterator that only emits strings. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a900071ae2a2d77ac76212b3e784b9148" name="a900071ae2a2d77ac76212b3e784b9148"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a900071ae2a2d77ac76212b3e784b9148">&#9670;&nbsp;</a></span>getInputStream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">getInputStream </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Exposes the source input stream.</p>
<p >This might be required to resolve a promise with an <a class="el" href="interface_amp_1_1_byte_stream_1_1_input_stream.html">InputStream</a>, because promises in Amp can't be resolved with other promises.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="interface_amp_1_1_byte_stream_1_1_input_stream.html">InputStream</a> </dd></dl>

</div>
</div>
<a id="a40dffd1b8c8d65b3c86af44f4d1f228d" name="a40dffd1b8c8d65b3c86af44f4d1f228d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40dffd1b8c8d65b3c86af44f4d1f228d">&#9670;&nbsp;</a></span>onResolve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool True if onResolve </td>
          <td>(</td>
          <td class="paramtype">callable&#160;</td>
          <td class="paramname"><em>$onResolved</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Registers a callback to be invoked when the promise is resolved.If this method is called multiple times, additional handlers will be registered instead of replacing any already existing handlers.If the promise is already resolved, the callback MUST be executed immediately.Exceptions MUST NOT be thrown from this method. Any exceptions thrown from invoked callbacks MUST be forwarded to the event-loop error handler.Note: You shouldn't implement this interface yourself. Instead, provide a method that returns a promise for the operation you're implementing. Objects other than pure placeholders implementing it are a very bad idea.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">callable</td><td class="paramname">$onResolved</td><td>The first argument shall be <code>null</code> on success, while the second shall be <code>null</code> on failure.</td></tr>
  </table>
  </dd>
</dl>
<p>@psalm-param callable(\Throwable|null, mixed): (Promise|\React\Promise\PromiseInterface|\Generator&lt;mixed, Promise|\React\Promise\PromiseInterface|array&lt;array-key, Promise|\React\Promise\PromiseInterface&gt;, mixed, mixed&gt;|null) | callable(\Throwable|null, mixed): void $onResolved<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_amp_1_1_promise.html#a0dc857ebb174eef4ad89ae0c1201ae0e">Promise</a>.</p>

</div>
</div>
<a id="a64571309bfb3238c65fd3c2898f92440" name="a64571309bfb3238c65fd3c2898f92440"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64571309bfb3238c65fd3c2898f92440">&#9670;&nbsp;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reads data from the stream.<dl class="section return"><dt>Returns</dt><dd><a class="el" href="interface_amp_1_1_promise.html">Promise</a> Resolves with a string when new data is available or <code>null</code> if the stream has closed.</dd></dl>
<p>@psalm-return <a class="el" href="interface_amp_1_1_promise.html">Promise</a>&lt;string|null&gt;<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_amp_1_1_byte_stream_1_1_pending_read_error.html">PendingReadError</a></td><td>Thrown if another read operation is still pending.</td></tr>
  </table>
  </dd>
</dl>
 </p>

<p>Implements <a class="el" href="interface_amp_1_1_byte_stream_1_1_input_stream.html#a64571309bfb3238c65fd3c2898f92440">InputStream</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>vendor/amphp/byte-stream/lib/Message.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
