<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>village green: C:/wamp64/racine/www/cda/fil_rouge/village_green/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">village green
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">C:/wamp64/racine/www/cda/fil_rouge/village_green/vendor/doctrine/dbal/src/Connections/PrimaryReadReplicaConnection.php</div></div>
</div><!--header-->
<div class="contents">
<p >Primary-Replica Connection</p>
<p >Connection can be used with primary-replica setups.</p>
<p >Important for the understanding of this connection should be how and when it picks the replica or primary.</p>
<ol type="1">
<li>Replica if primary was never picked before and ONLY if 'getWrappedConnection' or 'executeQuery' is used.</li>
<li>Primary picked when 'executeStatement', 'insert', 'delete', 'update', 'createSavepoint', 'releaseSavepoint', 'beginTransaction', 'rollback', 'commit' or 'prepare' is called.</li>
<li>If Primary was picked once during the lifetime of the connection it will always get picked afterwards.</li>
<li>One replica connection is randomly picked ONCE during a request.</li>
</ol>
<p >ATTENTION: You can write to the replica with this connection if you execute a write query without opening up a transaction. For example: </p><pre class="fragment"> $conn = DriverManager::getConnection(...);
 $conn-&gt;executeQuery("DELETE FROM table");
</pre><p> Be aware that Connection::executeQuery is a method specifically for READ operations only.</p>
<p >Use Connection::executeStatement for any SQL statement that changes/updates state in the database (UPDATE, INSERT, DELETE or DDL statements).</p>
<p >This connection is limited to replica operations using the Connection::executeQuery operation only, because it wouldn't be compatible with the ORM or SchemaManager code otherwise. Both use all the other operations in a context where writes could happen to a replica, which makes this restricted approach necessary.</p>
<p >You can manually connect to the primary at any time by calling: </p><pre class="fragment"> $conn-&gt;ensureConnectedToPrimary();
</pre><p> Instantiation through the DriverManager looks like:</p>
<p >@psalm-import-type Params from DriverManager</p>
<p >$conn = DriverManager::getConnection(array( 'wrapperClass' =&gt; 'Doctrine\DBAL\Connections\PrimaryReadReplicaConnection', 'driver' =&gt; 'pdo_mysql', 'primary' =&gt; array('user' =&gt; '', 'password' =&gt; '', 'host' =&gt; '', 'dbname' =&gt; ''), 'replica' =&gt; array( array('user' =&gt; 'replica1', 'password', 'host' =&gt; '', 'dbname' =&gt; ''), array('user' =&gt; 'replica2', 'password', 'host' =&gt; '', 'dbname' =&gt; ''), ) ));</p>
<p >You can also pass 'driverOptions' and any other documented option to each of this drivers to pass additional information.</p>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>Doctrine\DBAL\Connections;</div>
<div class="line"> </div>
<div class="line">use <a id="_a0" name="_a0"></a><a class="code hl_class" href="class_doctrine_1_1_common_1_1_event_manager.html">Doctrine\Common\EventManager</a>;</div>
<div class="line">use <a id="_a1" name="_a1"></a><a class="code hl_class" href="class_doctrine_1_1_d_b_a_l_1_1_configuration.html">Doctrine\DBAL\Configuration</a>;</div>
<div class="line">use <a id="_a2" name="_a2"></a><a class="code hl_class" href="class_doctrine_1_1_d_b_a_l_1_1_connection.html">Doctrine\DBAL\Connection</a>;</div>
<div class="line">use <a id="_a3" name="_a3"></a><a class="code hl_interface" href="interface_doctrine_1_1_d_b_a_l_1_1_driver.html">Doctrine\DBAL\Driver</a>;</div>
<div class="line">use <a class="code hl_class" href="class_doctrine_1_1_d_b_a_l_1_1_connection.html">Doctrine\DBAL\Driver\Connection</a> as DriverConnection;</div>
<div class="line">use <a id="_a4" name="_a4"></a><a class="code hl_interface" href="interface_doctrine_1_1_d_b_a_l_1_1_driver_1_1_exception.html">Doctrine\DBAL\Driver\Exception</a> as DriverException;</div>
<div class="line">use <a id="_a5" name="_a5"></a><a class="code hl_class" href="class_doctrine_1_1_d_b_a_l_1_1_driver_manager.html">Doctrine\DBAL\DriverManager</a>;</div>
<div class="line">use <a id="_a6" name="_a6"></a><a class="code hl_class" href="class_doctrine_1_1_d_b_a_l_1_1_event_1_1_connection_event_args.html">Doctrine\DBAL\Event\ConnectionEventArgs</a>;</div>
<div class="line">use <a id="_a7" name="_a7"></a><a class="code hl_class" href="class_doctrine_1_1_d_b_a_l_1_1_events.html">Doctrine\DBAL\Events</a>;</div>
<div class="line">use <a class="code hl_interface" href="interface_doctrine_1_1_d_b_a_l_1_1_driver_1_1_exception.html">Doctrine\DBAL\Exception</a>;</div>
<div class="line">use <a id="_a8" name="_a8"></a><a class="code hl_class" href="class_doctrine_1_1_d_b_a_l_1_1_driver_1_1_i_b_m_d_b2_1_1_statement.html">Doctrine\DBAL\Statement</a>;</div>
<div class="line">use InvalidArgumentException;</div>
<div class="line"> </div>
<div class="line">use <span class="keyword">function</span> array_rand;</div>
<div class="line">use <span class="keyword">function</span> count;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>PrimaryReadReplicaConnection <span class="keyword">extends</span> Connection</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">protected</span> $connections = [<span class="stringliteral">&#39;primary&#39;</span> =&gt; <span class="keyword">null</span>, <span class="stringliteral">&#39;replica&#39;</span> =&gt; <span class="keyword">null</span>];</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">protected</span> $keepReplica = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a9" name="a9"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a6e3c5b805d1bc87fab80314d58793ce5">__construct</a>(</div>
<div class="line">        array $params,</div>
<div class="line">        Driver $driver,</div>
<div class="line">        ?Configuration $config = <span class="keyword">null</span>,</div>
<div class="line">        ?EventManager $eventManager = <span class="keyword">null</span></div>
<div class="line">    ) {</div>
<div class="line">        <span class="keywordflow">if</span> (! isset($params[<span class="stringliteral">&#39;replica&#39;</span>], $params[<span class="stringliteral">&#39;primary&#39;</span>])) {</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(<span class="stringliteral">&#39;primary or replica configuration missing&#39;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (count($params[<span class="stringliteral">&#39;replica&#39;</span>]) === 0) {</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(<span class="stringliteral">&#39;You have to configure at least one replica.&#39;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (isset($params[<span class="stringliteral">&#39;driver&#39;</span>])) {</div>
<div class="line">            $params[<span class="stringliteral">&#39;primary&#39;</span>][<span class="stringliteral">&#39;driver&#39;</span>] = $params[<span class="stringliteral">&#39;driver&#39;</span>];</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">foreach</span> ($params[<span class="stringliteral">&#39;replica&#39;</span>] as $replicaKey =&gt; $replica) {</div>
<div class="line">                $params[<span class="stringliteral">&#39;replica&#39;</span>][$replicaKey][<span class="stringliteral">&#39;driver&#39;</span>] = $params[<span class="stringliteral">&#39;driver&#39;</span>];</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        $this-&gt;keepReplica = (bool) ($params[<span class="stringliteral">&#39;keepReplica&#39;</span>] ?? <span class="keyword">false</span>);</div>
<div class="line"> </div>
<div class="line">        parent::__construct($params, $driver, $config, $eventManager);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a10" name="a10"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a172d6679b9fc2462de310e0728ccb7ca">isConnectedToPrimary</a>(): bool</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;_conn !== <span class="keyword">null</span> &amp;&amp; $this-&gt;_conn === $this-&gt;connections[<span class="stringliteral">&#39;primary&#39;</span>];</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a11" name="a11"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connection.html#a78572828d11dcdf2a498497d9001d557">connect</a>($connectionName = <span class="keyword">null</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ($connectionName !== <span class="keyword">null</span>) {</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(</div>
<div class="line">                <span class="stringliteral">&#39;Passing a connection name as first argument is not supported anymore.&#39;</span></div>
<div class="line">                    . <span class="stringliteral">&#39; Use ensureConnectedToPrimary()/ensureConnectedToReplica() instead.&#39;</span></div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;performConnect();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">function</span> performConnect(?<span class="keywordtype">string</span> $connectionName = <span class="keyword">null</span>): bool</div>
<div class="line">    {</div>
<div class="line">        $requestedConnectionChange = ($connectionName !== <span class="keyword">null</span>);</div>
<div class="line">        $connectionName            = $connectionName ?? <span class="stringliteral">&#39;replica&#39;</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ($connectionName !== <span class="stringliteral">&#39;replica&#39;</span> &amp;&amp; $connectionName !== <span class="stringliteral">&#39;primary&#39;</span>) {</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(<span class="stringliteral">&#39;Invalid option to connect(), only primary or replica allowed.&#39;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If we have a connection open, and this is not an explicit connection</span></div>
<div class="line">        <span class="comment">// change request, then abort right here, because we are already done.</span></div>
<div class="line">        <span class="comment">// This prevents writes to the replica in case of &quot;keepReplica&quot; option enabled.</span></div>
<div class="line">        <span class="keywordflow">if</span> ($this-&gt;_conn !== <span class="keyword">null</span> &amp;&amp; ! $requestedConnectionChange) {</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        $forcePrimaryAsReplica = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ($this-&gt;<a id="a12" name="a12"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connection.html#a74aed9b813f90aaf883c20d7bd052408">getTransactionNestingLevel</a>() &gt; 0) {</div>
<div class="line">            $connectionName        = <span class="stringliteral">&#39;primary&#39;</span>;</div>
<div class="line">            $forcePrimaryAsReplica = <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (isset($this-&gt;connections[$connectionName])) {</div>
<div class="line">            $this-&gt;_conn = $this-&gt;connections[$connectionName];</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> ($forcePrimaryAsReplica &amp;&amp; ! $this-&gt;keepReplica) {</div>
<div class="line">                $this-&gt;connections[<span class="stringliteral">&#39;replica&#39;</span>] = $this-&gt;_conn;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ($connectionName === <span class="stringliteral">&#39;primary&#39;</span>) {</div>
<div class="line">            $this-&gt;connections[<span class="stringliteral">&#39;primary&#39;</span>] = $this-&gt;_conn = $this-&gt;<a id="a13" name="a13"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#af156759262c721342d102dbe7b7b9026">connectTo</a>($connectionName);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Set replica connection to primary to avoid invalid reads</span></div>
<div class="line">            <span class="keywordflow">if</span> (! $this-&gt;keepReplica) {</div>
<div class="line">                $this-&gt;connections[<span class="stringliteral">&#39;replica&#39;</span>] = $this-&gt;connections[<span class="stringliteral">&#39;primary&#39;</span>];</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            $this-&gt;connections[<span class="stringliteral">&#39;replica&#39;</span>] = $this-&gt;_conn = $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#af156759262c721342d102dbe7b7b9026">connectTo</a>($connectionName);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ($this-&gt;_eventManager-&gt;hasListeners(Events::postConnect)) {</div>
<div class="line">            $eventArgs = <span class="keyword">new</span> ConnectionEventArgs($this);</div>
<div class="line">            $this-&gt;_eventManager-&gt;dispatchEvent(Events::postConnect, $eventArgs);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a14" name="a14"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>(): bool</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;performConnect(<span class="stringliteral">&#39;primary&#39;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a15" name="a15"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#abafa240fcfd9c5a75907dc1b758a147f">ensureConnectedToReplica</a>(): bool</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;performConnect(<span class="stringliteral">&#39;replica&#39;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#af156759262c721342d102dbe7b7b9026">connectTo</a>($connectionName)</div>
<div class="line">    {</div>
<div class="line">        $params = $this-&gt;<a id="a16" name="a16"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connection.html#ae32cd7c32721b02d676bb63b4b1366db">getParams</a>();</div>
<div class="line"> </div>
<div class="line">        $connectionParams = $this-&gt;<a id="a17" name="a17"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#abcdaea31efc77bc4ae34e89557d3b9af">chooseConnectionConfiguration</a>($connectionName, $params);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">try</span> {</div>
<div class="line">            <span class="keywordflow">return</span> $this-&gt;_driver-&gt;connect($connectionParams);</div>
<div class="line">        } <span class="keywordflow">catch</span> (DriverException $e) {</div>
<div class="line">            <span class="keywordflow">throw</span> $this-&gt;convertException($e);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#abcdaea31efc77bc4ae34e89557d3b9af">chooseConnectionConfiguration</a>($connectionName, $params)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> ($connectionName === <span class="stringliteral">&#39;primary&#39;</span>) {</div>
<div class="line">            <span class="keywordflow">return</span> $params[<span class="stringliteral">&#39;primary&#39;</span>];</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        $config = $params[<span class="stringliteral">&#39;replica&#39;</span>][array_rand($params[<span class="stringliteral">&#39;replica&#39;</span>])];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (! isset($config[<span class="stringliteral">&#39;charset&#39;</span>]) &amp;&amp; isset($params[<span class="stringliteral">&#39;primary&#39;</span>][<span class="stringliteral">&#39;charset&#39;</span>])) {</div>
<div class="line">            $config[<span class="stringliteral">&#39;charset&#39;</span>] = $params[<span class="stringliteral">&#39;primary&#39;</span>][<span class="stringliteral">&#39;charset&#39;</span>];</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> $config;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a18" name="a18"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a116b619379bad860f5730ba8e658e4a0">executeStatement</a>($sql, array $params = [], array $types = [])</div>
<div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> parent::executeStatement($sql, $params, $types);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a19" name="a19"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#af3380f3b13931d581fa973a382946b32">beginTransaction</a>()</div>
<div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> parent::beginTransaction();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a20" name="a20"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#af5674c27d4a92f6228565010eacbb9cb">commit</a>()</div>
<div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> parent::commit();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a21" name="a21"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#aebaea4cae21e0e75ec1489c1648caeb3">rollBack</a>()</div>
<div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> parent::rollBack();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a22" name="a22"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#aa69c8bf1f1dcf4e72552efff1fe3e87e">close</a>()</div>
<div class="line">    {</div>
<div class="line">        unset($this-&gt;connections[<span class="stringliteral">&#39;primary&#39;</span>], $this-&gt;connections[<span class="stringliteral">&#39;replica&#39;</span>]);</div>
<div class="line"> </div>
<div class="line">        parent::close();</div>
<div class="line"> </div>
<div class="line">        $this-&gt;_conn       = <span class="keyword">null</span>;</div>
<div class="line">        $this-&gt;connections = [<span class="stringliteral">&#39;primary&#39;</span> =&gt; <span class="keyword">null</span>, <span class="stringliteral">&#39;replica&#39;</span> =&gt; <span class="keyword">null</span>];</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a23" name="a23"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a57a252644e309a73b4dbee4a564779ce">createSavepoint</a>($savepoint)</div>
<div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>();</div>
<div class="line"> </div>
<div class="line">        parent::createSavepoint($savepoint);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a24" name="a24"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a640cada9593ba5f9d2be8e2f800da774">releaseSavepoint</a>($savepoint)</div>
<div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>();</div>
<div class="line"> </div>
<div class="line">        parent::releaseSavepoint($savepoint);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a25" name="a25"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#adcfb14588f49281d8b62bbbe7533d1ff">rollbackSavepoint</a>($savepoint)</div>
<div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>();</div>
<div class="line"> </div>
<div class="line">        parent::rollbackSavepoint($savepoint);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a id="a26" name="a26"></a><a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a0f741e7b39d5685c909a704708ed1033">prepare</a>(<span class="keywordtype">string</span> $sql): Statement</div>
<div class="line">    {</div>
<div class="line">        $this-&gt;<a class="code hl_function" href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">ensureConnectedToPrimary</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> parent::prepare($sql);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_doctrine_1_1_common_1_1_event_manager_html"><div class="ttname"><a href="class_doctrine_1_1_common_1_1_event_manager.html">Doctrine\Common\EventManager</a></div><div class="ttdef"><b>Definition:</b> EventManager.php:13</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_configuration_html"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_configuration.html">Doctrine\DBAL\Configuration</a></div><div class="ttdef"><b>Definition:</b> Configuration.php:17</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connection_html"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connection.html">Doctrine\DBAL\Connection</a></div><div class="ttdef"><b>Definition:</b> Connection.php:49</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connection_html_a74aed9b813f90aaf883c20d7bd052408"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connection.html#a74aed9b813f90aaf883c20d7bd052408">Doctrine\DBAL\Connection\getTransactionNestingLevel</a></div><div class="ttdeci">getTransactionNestingLevel()</div><div class="ttdef"><b>Definition:</b> Connection.php:1177</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connection_html_a78572828d11dcdf2a498497d9001d557"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connection.html#a78572828d11dcdf2a498497d9001d557">Doctrine\DBAL\Connection\connect</a></div><div class="ttdeci">connect()</div><div class="ttdef"><b>Definition:</b> Connection.php:329</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connection_html_ae32cd7c32721b02d676bb63b4b1366db"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connection.html#ae32cd7c32721b02d676bb63b4b1366db">Doctrine\DBAL\Connection\getParams</a></div><div class="ttdeci">getParams()</div><div class="ttdef"><b>Definition:</b> Connection.php:220</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_a0f741e7b39d5685c909a704708ed1033"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a0f741e7b39d5685c909a704708ed1033">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\prepare</a></div><div class="ttdeci">prepare(string $sql)</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:357</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_a116b619379bad860f5730ba8e658e4a0"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a116b619379bad860f5730ba8e658e4a0">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\executeStatement</a></div><div class="ttdeci">executeStatement($sql, array $params=[], array $types=[])</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:277</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_a172d6679b9fc2462de310e0728ccb7ca"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a172d6679b9fc2462de310e0728ccb7ca">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\isConnectedToPrimary</a></div><div class="ttdeci">isConnectedToPrimary()</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:135</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_a4a735388ba9c31340ce7819161229811"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a4a735388ba9c31340ce7819161229811">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\ensureConnectedToPrimary</a></div><div class="ttdeci">ensureConnectedToPrimary()</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:214</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_a57a252644e309a73b4dbee4a564779ce"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a57a252644e309a73b4dbee4a564779ce">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\createSavepoint</a></div><div class="ttdeci">createSavepoint($savepoint)</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:330</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_a640cada9593ba5f9d2be8e2f800da774"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a640cada9593ba5f9d2be8e2f800da774">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\releaseSavepoint</a></div><div class="ttdeci">releaseSavepoint($savepoint)</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:340</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_a6e3c5b805d1bc87fab80314d58793ce5"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#a6e3c5b805d1bc87fab80314d58793ce5">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\__construct</a></div><div class="ttdeci">__construct(array $params, Driver $driver, ?Configuration $config=null, ?EventManager $eventManager=null)</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:105</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_aa69c8bf1f1dcf4e72552efff1fe3e87e"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#aa69c8bf1f1dcf4e72552efff1fe3e87e">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\close</a></div><div class="ttdeci">close()</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:317</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_abafa240fcfd9c5a75907dc1b758a147f"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#abafa240fcfd9c5a75907dc1b758a147f">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\ensureConnectedToReplica</a></div><div class="ttdeci">ensureConnectedToReplica()</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:226</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_abcdaea31efc77bc4ae34e89557d3b9af"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#abcdaea31efc77bc4ae34e89557d3b9af">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\chooseConnectionConfiguration</a></div><div class="ttdeci">chooseConnectionConfiguration($connectionName, $params)</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:259</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_adcfb14588f49281d8b62bbbe7533d1ff"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#adcfb14588f49281d8b62bbbe7533d1ff">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\rollbackSavepoint</a></div><div class="ttdeci">rollbackSavepoint($savepoint)</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:350</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_aebaea4cae21e0e75ec1489c1648caeb3"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#aebaea4cae21e0e75ec1489c1648caeb3">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\rollBack</a></div><div class="ttdeci">rollBack()</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:307</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_af156759262c721342d102dbe7b7b9026"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#af156759262c721342d102dbe7b7b9026">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\connectTo</a></div><div class="ttdeci">connectTo($connectionName)</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:240</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_af3380f3b13931d581fa973a382946b32"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#af3380f3b13931d581fa973a382946b32">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\beginTransaction</a></div><div class="ttdeci">beginTransaction()</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:287</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection_html_af5674c27d4a92f6228565010eacbb9cb"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_connections_1_1_primary_read_replica_connection.html#af5674c27d4a92f6228565010eacbb9cb">Doctrine\DBAL\Connections\PrimaryReadReplicaConnection\commit</a></div><div class="ttdeci">commit()</div><div class="ttdef"><b>Definition:</b> PrimaryReadReplicaConnection.php:297</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_driver_1_1_i_b_m_d_b2_1_1_statement_html"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_driver_1_1_i_b_m_d_b2_1_1_statement.html">Doctrine\DBAL\Driver\IBMDB2\Statement</a></div><div class="ttdef"><b>Definition:</b> Statement.php:34</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_driver_manager_html"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_driver_manager.html">Doctrine\DBAL\DriverManager</a></div><div class="ttdef"><b>Definition:</b> DriverManager.php:72</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_event_1_1_connection_event_args_html"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_event_1_1_connection_event_args.html">Doctrine\DBAL\Event\ConnectionEventArgs</a></div><div class="ttdef"><b>Definition:</b> ConnectionEventArgs.php:12</div></div>
<div class="ttc" id="aclass_doctrine_1_1_d_b_a_l_1_1_events_html"><div class="ttname"><a href="class_doctrine_1_1_d_b_a_l_1_1_events.html">Doctrine\DBAL\Events</a></div><div class="ttdef"><b>Definition:</b> Events.php:11</div></div>
<div class="ttc" id="ainterface_doctrine_1_1_d_b_a_l_1_1_driver_1_1_exception_html"><div class="ttname"><a href="interface_doctrine_1_1_d_b_a_l_1_1_driver_1_1_exception.html">Doctrine\DBAL\Driver\Exception</a></div><div class="ttdef"><b>Definition:</b> Exception.php:13</div></div>
<div class="ttc" id="ainterface_doctrine_1_1_d_b_a_l_1_1_driver_html"><div class="ttname"><a href="interface_doctrine_1_1_d_b_a_l_1_1_driver.html">Doctrine\DBAL\Driver</a></div><div class="ttdef"><b>Definition:</b> Driver.php:16</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
